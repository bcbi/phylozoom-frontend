git:
  depth: 10
dist: trusty
sudo: required

matrix:
  include:
    - stage: test
      before_install:
        - sudo apt-get update
        - sudo apt-get install node -y
      install:
        - npm install
    - stage: build docker image
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --pasword-stdin
      - docker build -t phylozoom-frontend .
      - docker images
      - docker tag phylozoom-frontend $DOCKER_USERNAME/phylozoom-frontend
      - docker push $DOCKER_USERNAME/phylozoom-frontend
